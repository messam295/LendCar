@page
@model AdminModel
@{
    ViewData["Title"] = "Admin";
}
    <section class="no-padding">
        <div class="container-fluid">
            <div class="row">
                <div class="board">
                    @*<h2>Welcome to IGHALO!<sup>™</sup></h2>*@
                    <div class="board-inner">

                        @*list of tabs*@
                        <ul class="nav nav-tabs" id="myTab">
                            <div class="liner"></div>
                            <li class="active" id="vehiclesTabLi">
                                <a href="#vehiclesTabDiv" data-toggle="tab" title="Pending Vehicles">
                                    <span class="round-tabs one">
                                        <i class="glyphicon glyphicon-exclamation-sign"></i>
                                    </span>
                                </a>
                            </li>

                            <li id="brandsTabLi">
                                <a href="#brandsTabDiv" data-toggle="tab" title="Brands">
                                    <span class="round-tabs two">
                                        <i class="glyphicon glyphicon-copyright-mark"></i>
                                    </span>
                                </a>
                            </li>
                            <li id="brandModelsTabLi">
                                <a href="#brandModelsTabDiv" data-toggle="tab" title="Models">
                                    <span class="round-tabs three">
                                        <i class="glyphicon glyphicon-gift"></i>
                                    </span>
                                </a>
                            </li>

                            <li id="colorsTabLi">
                                <a href="#colorsTabDiv" data-toggle="tab" title="Colors">
                                    <span class="round-tabs four">
                                        <i class="glyphicon glyphicon-comment"></i>
                                    </span>
                                </a>
                            </li>

                            <li id="vehicleTypesTabLi">
                                <a href="#vehicleTypesTabDiv" data-toggle="tab" title="Vehicle types">
                                    <span class="round-tabs five">
                                        <i class="glyphicon glyphicon-ok"></i>
                                    </span>
                                </a>
                            </li>

                        </ul>
                    </div>

                    @*Tab 1*@
                    <div class="container">
                        <div class="tab-content">
                            <div class="tab-pane fade in active tabDiv" id="vehiclesTabDiv">
                                <div class="row">
                                    <div class="form-group col-md-2">
                                        <label>Show Entries : </label>
                                        <select class="form-control" onchange="changeEntries(this.value)">
                                            <option value="0">select size..</option>
                                            <option value="5">5</option>
                                            <option value="15">15</option>
                                            <option value="50">50</option>
                                        </select>
                                    </div>
                                    <div class="col-md-7">
                                        <h3 class="head text-center">Vehicles</h3>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label for="">Search : </label>
                                        <input type="text" class="form-control">
                                    </div>
                                </div>

                                <section id="main-container" class="main-container">
                                    <div class="container">
                                        <div class="row">
                                            @*<img src="~/loader6.gif" style="display:none" id="loader" class="preload" />*@
                                            <div id="vechileList">
                                                <partial name="_AdminCarList" model="@Model.Vehicles" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="text-center">

                                        @Html.PagedListPager((IPagedList)Model.Vehicles, page => "Admin/Admin?vehiclePage=" + page,
                                            new X.PagedList.Mvc.Common.PagedListRenderOptions
                                            {
                                                DisplayItemSliceAndTotal = true,
                                                ContainerDivClasses = new[] { "navigation" },
                                                LiElementClasses = new[] { "page-item","admin-list" },
                                                PageClasses = new[] { "page-link" },
                                            })
                                    </div>
                                </section>
                            </div>

                            @*Tap 2*@
                            <div class="tab-pane fade tabDiv"  id="brandsTabDiv">
                                <div class="row">
                                    <div class="form-group col-md-2">
                                        <label>Show Entries : </label>
                                        <select class="form-control" onchange="changeEntries(this.value)">
                                            <option value="0">select size ..</option>
                                            <option value="5">5</option>
                                            <option value="15">15</option>
                                            <option value="50">50</option>
                                        </select>
                                    </div>
                                    <div class="col-md-7">
                                        <h3 class="head text-center">Brand</h3>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label for="">Search : </label>
                                        <input type="text" class="form-control">
                                    </div>
                                </div>

                                <div class="container">
                                    <div class="row col-md-8 col-md-offset-2 custyle">
                                        <button id="ShowBrandModal" class="btn btn-primary btn-xs pull-left" onclick="ShowCreateBrandModal()"><b>+</b> Add new Brand</button>
                                        <div id="BrandsSection">
                                        <partial name="_BrandsList" model="Model.Brands" />
                                        </div>
                                        <div class="text-center">

                                            @Html.PagedListPager((IPagedList)Model.Brands, brandPage => "/Admin/Admin?brandPage=" + brandPage,
                                                new X.PagedList.Mvc.Common.PagedListRenderOptions
                                                {
                                                    DisplayItemSliceAndTotal = true,
                                                    ContainerDivClasses = new[] { "navigation" },
                                                    LiElementClasses = new[] { "page-item", "admin-list" },
                                                    PageClasses = new[] { "page-link" },
                                                })
                                        </div>
                                        <!--model of edit-->
                                        <div class="modal fade product_view" id="EditBrandModal">
                                            <div class="modal-dialog">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <a class="class pull-right btn-xs" id="HideEditBrand" onclick="HideEditBrandModal()"><span class="glyphicon glyphicon-remove" style="color:red"></span></a>
                                                        <h3 class="modal-title">Edit</h3>
                                                    </div>
                                                    <div class="modal-body">
                                                        <section class="edit-admin">
                                                            <div class="container">
                                                                <form id="EditBrandForm">
                                                                    <input id="EditedBrandId" name="Id" hidden />
                                                                    <div class="row">
                                                                        <div class="col-md-4  col-md-offset-1 edit-color">
                                                                            <div class="form-group">
                                                                                <label>Brand</label>
                                                                                <input class="form-control" type="text" name="Name" id="EditedBrandName" placeholder="Enter Car Brand" required>
                                                                            </div>
                                                                            <div class="row">
                                                                                <div class="col-md-12 text-center">
                                                                                    <button id="EditBrandBtn" class="btn btn-primary save" disabled>Save <i class="far fa-save"></i></button><br><br>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </form>
                                                            </div>
                                                        </section>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!--model of Create-->
                                        <div class="modal fade product_view" id="Brand_Create">
                                            <div class="modal-dialog">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <a id="HideBrandModal" class="class pull-right btn-xs" onclick="HideCreateBrandModal()"><span class="glyphicon glyphicon-remove" style="color:red"></span></a>
                                                        <h3 class="modal-title">Create</h3>
                                                    </div>
                                                    <div class="modal-body">
                                                        <section class="create-admin">
                                                            <div class="container">
                                                                <form id="AddBrandForm" >
                                                                    <div class="row">
                                                                        <div class="col-md-4  col-md-offset-1 create-border">
                                                                            <div class="form-group">
                                                                                <label>Brand</label>
                                                                                <input class="form-control" id="BrandName" name="Name" placeholder="Enter Car Brand" required>
                                                                            </div>
                                                                            <div class="row">
                                                                                <div class="col-md-12 text-center">
                                                                                    <button id="AddBrandBtn" type="submit" class="btn btn-primary save" disabled>Save <i class="far fa-save"></i></button><br><br>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </form>
                                                            </div>
                                                        </section>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>

                            @*Tab 3*@
                            <div class="tab-pane fade tabDiv" id="brandModelsTabDiv">
                                <div class="row">
                                    <div class="form-group col-md-2">
                                        <label>Show Entries : </label>
                                        <select class="form-control" onchange="changeEntries(this.value)">
                                            <option value="0">select size ..</option>
                                            <option value="5">5</option>
                                            <option value="15">15</option>
                                            <option value="50">50</option>
                                        </select>
                                    </div>
                                    <div class="col-md-7">
                                        <h3 class="head text-center">Models</h3>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label>Select brand to filter by : </label>
                                        <select onchange="RenderBrandModels(this)" asp-items="@Model.BrandsSelectList">
                                            <option value="0">All brands</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="container">
                                    <div class="row col-md-8 col-md-offset-2 custyle">
                                        <button id="ShowBrandModelModal" class="btn btn-primary btn-xs pull-left" onclick="ShowCreateBrandModelModal()"><b>+</b> Add New Model</button>
                                        <div id="BrandModelsSection">
                                            <partial name="_BrandModelsList" model="Model.BrandModels" />
                                        </div>
                                        <div class="text-center">

                                            @Html.PagedListPager((IPagedList)Model.BrandModels, brandModelPage => "/Admin/Admin?brandModelPage=" + brandModelPage,
                                                new X.PagedList.Mvc.Common.PagedListRenderOptions
                                                {
                                                    DisplayItemSliceAndTotal = true,
                                                    ContainerDivClasses = new[] { "navigation" },
                                                    LiElementClasses = new[] { "page-item", "admin-list" },
                                                    PageClasses = new[] { "page-link" },
                                                })
                                        </div>

                                        <!--model of edit brandmodel-->
                                        <div class="modal fade product_view" id="EditBrandModelModal">
                                            <div class="modal-dialog">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <a class="class pull-right btn-xs"  onclick="HideEditBrandModelModal()"><span class="glyphicon glyphicon-remove" style="color:red"></span></a>
                                                        <h3 class="modal-title">Edit</h3>
                                                    </div>
                                                    <div class="modal-body">
                                                        <section class="edit-admin">
                                                            <div class="container">
                                                                <form id="EditBrandModelForm">
                                                                    <input id="EditedBrandModelId" name="Id" hidden />
                                                                    <div class="row">
                                                                        <div class="col-md-4  col-md-offset-1 edit-color">
                                                                            <div class="form-group">
                                                                                <label>Model</label>
                                                                                <input class="form-control" type="text" name="Name" id="EditedBrandModelName" placeholder="Enter Car Model" required>
                                                                                <label>Brand</label>
                                                                                <select id="BrandForEditedModel" name="BrandId" asp-items="@Model.BrandsSelectList"></select>
                                                                            </div>
                                                                            <div class="row">
                                                                                <div class="col-md-12 text-center">
                                                                                    <button id="EditBrandModelBtn" class="btn btn-primary save" disabled>Save <i class="far fa-save"></i></button><br><br>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </form>
                                                            </div>
                                                        </section>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!--model of Create brandmodel-->
                                        <div class="modal fade product_view" id="BrandModel_Create">
                                            <div class="modal-dialog">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <a id="HideBrandModelModal" class="class pull-right btn-xs" onclick="HideCreateBrandModelModal()"><span class="glyphicon glyphicon-remove" style="color:red"></span></a>
                                                        <h3 class="modal-title">Create</h3>
                                                    </div>
                                                    <div class="modal-body">
                                                        <section class="create-admin">
                                                            <div class="container">
                                                                <form id="AddBrandModelForm">
                                                                    <div class="row">
                                                                        <div class="col-md-4  col-md-offset-1 create-border">
                                                                            <div class="form-group">
                                                                                <label>Model</label>
                                                                                <input class="form-control" id="BrandModelName" name="Name" placeholder="Enter Car Model" required>
                                                                                <label>Brand</label>
                                                                                <select id="BrandForAddedModel" name="BrandId" asp-items="@Model.BrandsSelectList"></select>
                                                                            </div>
                                                                            <div class="row">
                                                                                <div class="col-md-12 text-center">
                                                                                    <button id="AddBrandModelBtn" type="submit" class="btn btn-primary save" disabled>Save <i class="far fa-save"></i></button><br><br>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </form>
                                                            </div>
                                                        </section>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                    </div>
                                </div>
                            </div>

                            @*Tab 4*@
                            <div class="tab-pane fade tabDiv" id="colorsTabDiv">
                                <div class="row">
                                    <div class="form-group col-md-2">
                                        <label>Show Entries : </label>
                                        <select class="form-control" onchange="changeEntries(this.value)">
                                            <option value="0">select size ..</option>
                                            <option value="5">5</option>
                                            <option value="15">15</option>
                                            <option value="50">50</option>
                                        </select>
                                    </div>
                                    <div class="col-md-7">
                                        <h3 class="head text-center">Color</h3>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label for="">Search : </label>
                                        <input type="text" class="form-control">
                                    </div>
                                </div>

                                <div class="container">
                                    <div class="row col-md-8 col-md-offset-2 custyle">
                                        <table class="table table-striped custab">
                                            <thead>
                                                <a href="#" class="btn btn-primary btn-xs pull-left"><b>+</b> Add new Color</a>
                                                <tr>
                                                    <th>ID</th>
                                                    <th>Color</th>
                                                    <th class="text-center">Action</th>
                                                </tr>
                                            </thead>
                                            <tr>
                                                <td>1</td>
                                                <td>News</td>
                                                <td class="text-center"><a class='btn btn-info btn-xs' href="#"><span class="glyphicon glyphicon-edit"></span> Edit</a> <a href="#" class="btn btn-danger btn-xs"><span class="glyphicon glyphicon-remove"></span> Del</a></td>
                                            </tr>
                                            <tr>
                                                <td>2</td>
                                                <td>Products</td>
                                                <td class="text-center"><a class='btn btn-info btn-xs' href="#"><span class="glyphicon glyphicon-edit"></span> Edit</a> <a href="#" class="btn btn-danger btn-xs"><span class="glyphicon glyphicon-remove"></span> Del</a></td>
                                            </tr>
                                            <tr>
                                                <td>3</td>
                                                <td>Blogs</td>
                                                <td class="text-center"><a class='btn btn-info btn-xs' href="#"><span class="glyphicon glyphicon-edit"></span> Edit</a> <a href="#" class="btn btn-danger btn-xs"><span class="glyphicon glyphicon-remove"></span> Del</a></td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            @*Tab 5*@
                            <div class="tab-pane fade tabDiv" id="vehicleTypesTabDiv">
                                <div class="text-center">
                                    <div class="row">
                                        <div class="form-group col-md-2">
                                            <label>Show Entries : </label>
                                            <select class="form-control" onchange="changeEntries(this.value)">
                                                <option value="5">5</option>
                                                <option value="15">15</option>
                                                <option value="50">50</option>
                                            </select>
                                        </div>
                                        <div class="col-md-7">
                                            <h3 class="head text-center">Color</h3>
                                        </div>
                                        <div class="form-group col-md-3">
                                            <label for="">Search : </label>
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>

                                    <div class="container">
                                        <div class="row col-md-8 col-md-offset-2 custyle">
                                            <table class="table table-striped custab">
                                                <thead>
                                                    <a href="#" class="btn btn-primary btn-xs pull-left"><b>+</b> Add new Color</a>
                                                    <tr>
                                                        <th>ID</th>
                                                        <th>Color</th>
                                                        <th class="text-center">Action</th>
                                                    </tr>
                                                </thead>
                                                <tr>
                                                    <td>1</td>
                                                    <td>News</td>
                                                    <td class="text-center"><a class='btn btn-info btn-xs' href="#"><span class="glyphicon glyphicon-edit"></span> Edit</a> <a href="#" class="btn btn-danger btn-xs"><span class="glyphicon glyphicon-remove"></span> Del</a></td>
                                                </tr>
                                                <tr>
                                                    <td>2</td>
                                                    <td>Products</td>
                                                    <td class="text-center"><a class='btn btn-info btn-xs' href="#"><span class="glyphicon glyphicon-edit"></span> Edit</a> <a href="#" class="btn btn-danger btn-xs"><span class="glyphicon glyphicon-remove"></span> Del</a></td>
                                                </tr>
                                                <tr>
                                                    <td>3</td>
                                                    <td>Blogs</td>
                                                    <td class="text-center"><a class='btn btn-info btn-xs' href="#"><span class="glyphicon glyphicon-edit"></span> Edit</a> <a href="#" class="btn btn-danger btn-xs"><span class="glyphicon glyphicon-remove"></span> Del</a></td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


@section Scripts{
    <script>

        var currentUrl = window.location.href;
        if (currentUrl.includes("vehiclePage")) {
            resetTabs();
            $("#vehiclesTabLi").addClass(" active");
            $("#vehiclesTabDiv").addClass(" in active");
        }
        else if (currentUrl.includes("brandPage")) {
            resetTabs();
            $("#brandsTabLi").addClass(" active");
            $("#brandsTabDiv").addClass(" in active");
        }
        else if (currentUrl.includes("brandModelPage")) {
            resetTabs();
            $("#brandModelsTabLi").addClass(" active");
            $("#brandModelsTabDiv").addClass(" in active");
        }

        function resetTabs() {
            $("#myTab>li.active").removeClass("active");
            $(".tabDiv").removeClass("in active");
        }

        function changeEntries(entries) {

            if (parseInt(entries) > 0 && parseInt(entries) != @Model.PageSize) {
                var url = '@Url.Content("~/admin/admin?entries=")' + entries;
                window.location.href = url;
            }
        }

        $(document).on('click', '.accept', function () {

            let vechicleId = $(this).attr('data-id');

                if (vechicleId != undefined) {
                    $.ajax({
                        method: 'Post',
                        data: { Page:@Model.CurrentVehiclesPage, Id: vechicleId },
                        url: '/Vehicles/Accept',
                        beforeSend: function () {
                            $('#loader').show();
                        },
                        success: function (data) {
                            $('#vechileList').html(data);
                            $('#loader').hide();
                        },
                        error: function (err) { console.log(err) }

                    })
                }

        })

        $(document).on('click','.refuse',function () {

            let vechicleId = $(this).attr('data-id');

                if (vechicleId != undefined) {
                    $.ajax({
                        method: 'Post',
                        data: { page:@Model.CurrentVehiclesPage, id: vechicleId },
                        url: '/Vehicles/Refuse',
                        beforeSend: function () {
                            $('#loader').show();
                        },
                        success: function (data) {
                            console.log(data);
                            $('#vechileList').html(data);
                            $('#loader').hide();
                        },
                        error: function (xhr, ajaxOptions, thrownError) {
                            console.log(xhr.status);
                            console.log(thrownError);
                        }

                    })
                }

            })

        function DeleteBrand(element) {
            var deletedBrandName = element.getAttribute("data-deleted-brand-name");
                    var choice = confirm('Are you sure you want to delete ' + deletedBrandName);
                    if (choice) {
                        var brandId = parseInt(element.getAttribute("data-deleted-brand-id"));
                        var url = '@Url.Content($"~/api/Brands/Delete/")';
                        debugger;
                        $.ajax({
                            url: url + brandId + "/@Model.CurrentBrandsPage" + "/@Model.PageSize",
                            cache: false,
                            method: 'Post',
                            headers: {
                                "Content-Type": "application/json"
                            },
                            success: function (data) {
                                $("#BrandsSection").html(data);
                            },
                            error: function (xhr, ajaxSettings, thrownError) {
                                console.log(xhr.status);
                                console.log(thrownError);
                            }
                        })
                    }
                }

        function ShowEditBrandModal(element) {
            var editedBrandName = element.getAttribute("data-edited-brand-name");
            var editedBrandId = element.getAttribute("data-edited-brand-id");
            $("#EditBrandModal").modal('show');
            $("#EditedBrandName").val(editedBrandName);
            $("#EditedBrandId").val(editedBrandId);
        }

        function ShowEditBrandModelModal(element) {
            var editedBrandModelName = element.getAttribute("data-edited-brandModel-name");
            var editedBrandModelId = element.getAttribute("data-edited-brandModel-id");
            var brandForEditedModel = element.getAttribute("data-edited-brandModel-brandId");
            $("#EditBrandModelModal").modal('show');
            $("#EditedBrandModelName").val(editedBrandModelName);
            $("#EditedBrandModelId").val(editedBrandModelId);
            $("#BrandForEditedModel").val(brandForEditedModel);
        }

        function HideEditBrandModal() {
            $("#EditBrandModal").modal('hide')
        }

        function HideEditBrandModelModal() {
            $("#EditBrandModelModal").modal('hide')
        }


        function ShowCreateBrandModal() {
            $("#Brand_Create").modal('show');
        }

        function HideCreateBrandModal() {
            $("#Brand_Create").modal('hide');
        }

        function ShowCreateBrandModelModal() {
            $("#BrandModel_Create").modal('show');
        }
        function HideCreateBrandModelModal() {
            $("#BrandModel_Create").modal('hide');
        }

        $(document).ready(function () {

            $("#AddBrandForm").on("blur", "input", () => {
                if ($("#AddBrandForm").valid()) {
                    $("#AddBrandBtn").removeAttr("disabled");
                } else {
                    $("#AddBrandBtn").attr("disabled", "disabled");
                }
            });

            $("#EditBrandForm").on("blur", "input", () => {
                if ($("#EditBrandForm").valid()) {
                    $("#EditBrandBtn").removeAttr("disabled");
                } else {
                    $("#EditBrandBtn").attr("disabled", "disabled");
                }
            });

            $("#AddBrandModelForm").on("blur", "input", () => {
                if ($("#AddBrandModelForm").valid()) {
                    $("#AddBrandModelBtn").removeAttr("disabled");
                } else {
                    $("#AddBrandModelBtn").attr("disabled", "disabled");
                }
            });

            $("#EditBrandModelForm").on("blur", "input", () => {
                if ($("#EditBrandModelForm").valid()) {
                    $("#EditBrandModelBtn").removeAttr("disabled");
                } else {
                    $("#EditBrandModelBtn").attr("disabled", "disabled");
                }
            });


            $("#AddBrandForm").submit(
                function () {
                    event.preventDefault();
                    var url = '@Url.Content("~/api/Brands/Add/")' + @Model.CurrentBrandsPage + "/@Model.PageSize";
                    var data = { "Name": $("#BrandName").val()};

                    $.ajax({
                        url: url,
                        data: JSON.stringify(data),
                        cache: false,
                        method: 'POST',
                        beforeSend: function () {
                            $("#Brand_Create").modal('hide');
                            $('#loader').show();
                        },
                        headers: {
                            "Content-Type": "application/json",
                            "Content-Length": data.length},
                        success: function (data) {
                            $("#loader").hide();
                            $("#BrandsSection").html(data);
                        },
                        error: function (xhr, ajaxSettings, thrownError) {
                            console.log(xhr.status);
                            console.log(thrownError);
                        }
                    })
                }
            );

            $("#EditBrandForm").submit(
                function () {
                    event.preventDefault();
                    var EditedBrandId = parseInt($("#EditedBrandId").val());
                    var EditedBrandName = $("#EditedBrandName").val();
                    var url = '@Url.Content("~/api/Brands/Edit/")' + EditedBrandId + "/@Model.CurrentBrandsPage" + "/@Model.PageSize" ;
                    var data = { Id: EditedBrandId, Name: EditedBrandName }
                    debugger;
                    $.ajax({
                        url: url,
                        data: JSON.stringify(data),
                        cache: false,
                        method: 'POST',
                        beforeSend: function () {
                            $("#EditBrandModal").modal('hide');
                            $('#loader').show();
                        },
                        headers: {
                            "Content-Type": "application/json",
                            "Content-Length": data.length},
                        success: function (data) {
                            $("#loader").hide();
                            $("#BrandsSection").html(data);
                        },
                        error: function (xhr, ajaxSettings, thrownError) {
                            console.log(xhr.status);
                            console.log(thrownError);
                        }
                    })
                }
            );

            $("#AddBrandModelForm").submit(
                function () {
                    event.preventDefault();
                    var url = '@Url.Content("~/api/BrandModels/Add/")' + @Model.CurrentBrandModelsPage + "/@Model.PageSize";
                    var data = { "Name": $("#BrandModelName").val(), "BrandId": parseInt($("#BrandForAddedModel").val()) };
                    debugger;

                    $.ajax({
                        url: url,
                        data: JSON.stringify(data),
                        cache: false,
                        method: 'POST',
                        beforeSend: function () {
                            $("#BrandModel_Create").modal('hide');
                        },
                        headers: {
                            "Content-Type": "application/json",
                            "Content-Length": data.length},
                        success: function (data) {
                            $("#BrandModelsSection").html(data);
                        },
                        error: function (xhr, ajaxSettings, thrownError) {
                            console.log(xhr.status);
                            console.log(thrownError);
                        }
                    })
                }
            );

            $("#EditBrandModelForm").submit(
                function () {
                    event.preventDefault();
                    var EditedBrandModelId = parseInt($("#EditedBrandModelId").val());
                    var EditedBrandModelName = $("#EditedBrandModelName").val();
                    var url = '@Url.Content("~/api/BrandModels/Edit/")' + EditedBrandModelId + "/@Model.CurrentBrandModelsPage" + "/@Model.PageSize";
                    var data = { Id: EditedBrandModelId, Name: EditedBrandModelName, brandId: parseInt($("#BrandForEditedModel").val()) }
                    debugger;
                    $.ajax({
                        url: url,
                        data: JSON.stringify(data),
                        cache: false,
                        method: 'POST',
                        beforeSend: function () {
                            $("#EditBrandModelModal").modal('hide');
                        },
                        headers: {
                            "Content-Type": "application/json",
                            "Content-Length": data.length},
                        success: function (data) {
                            $("#loader").hide();
                            $("#BrandModelsSection").html(data);
                        },
                        error: function (xhr, ajaxSettings, thrownError) {
                            console.log(xhr.status);
                            console.log(thrownError);
                        }
                    })
                }
            );


            $('/*ul*/.pagination > li.disabled > a').addClass('page-link');

        });

        function RenderBrandModels(element)
        {
            var selectedBrandId = parseInt(element.value);
            var url = '@Url.Content("~/api/BrandModels/GetBrandModelsPartial/")' + selectedBrandId + "/@Model.CurrentBrandModelsPage" +"/@Model.PageSize";

            $.ajax({
                url: url,
                method: 'Get',
                cache: false,
                headers: {
                    "Content-Type": "application/json"
                },
                success: function (data) {
                    $("#BrandModelsSection").html(data);
                },
                error: function (xhr, ajaxSettings, thrownError) {
                    console.log(xhr.status);
                    console.log(thrownError);
                }
            });
        }

    </script>
}